### <a name="sslstream-supports-tls-alerts"></a>SslStream prend en charge TLS alertes

|   |   |
|---|---|
|Détails|Après une négociation TLS ayant échouée, une <xref:System.IO.IOException?displayProperty=name> avec une exception interne <xref:System.ComponentModel.Win32Exception?displayProperty=name> exception sera levée par la première opération d’e/s en lecture/écriture. Le <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> de code pour le <xref:System.ComponentModel.Win32Exception?displayProperty=name> peuvent être mappées à l’alerte TLS à partir de la partie distante à l’aide de ce [Schannel documentation](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx). Pour plus d’informations, consultez [RFC 2246 : les alertes d’erreur Section 7.2.2](https://tools.ietf.org/html/rfc2246#section-7.2.2)le comportement de .NET 4.6.2 et en dessous est que le canal de transport (généralement les connexions TCP) expire pendant l’écriture ou en lecture en cas d’échec de l’autre partie du protocole de transfert et immédiatement par la suite a rejeté la connexion.|
|Suggestion|Les applications qui appellent réseau tels que les I/O APIs <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)> / <xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> doit gérer <xref:System.IO.IOException> ou <xref:System.TimeoutException?displayProperty=name>. La fonctionnalité d’alertes de TLS est activée par défaut, en commençant par .NET 4.7. Les applications ciblant .NET 4.0 - .NET 4.6.2 en cours d’exécution sur un système plus élevée ou le .NET 4.7 aura la fonctionnalité désactivée pour préserver la compatibilité. L’API de configuration suivant est disponible pour activer ou désactiver la fonctionnalité de .NET 4.6 et au-dessus des applications s’exécutant sur .NET 4.7 ou framework plus élevée.<ul><li>Par programme :</li></ul>Doit être la première action de l’application depuis le ServicePointManager initialisera qu’une seule fois :<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>/Appconfig :</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Clé de Registre (machine global) :</li></ul>Définissez la valeur « False » pour activer la fonctionnalité de .NET 4.6 - 4.6.2.<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|Portée|Microsoft Edge|
|Version|4.7|
|Type|Reciblage|
|API affectées|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

