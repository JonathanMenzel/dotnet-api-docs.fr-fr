### <a name="sslstream-supports-tls-alerts"></a>SslStream prend en charge les alertes TLS

|   |   |
|---|---|
|Détails|Après l’échec d’une négociation TLS, un <xref:System.IO.IOException?displayProperty=name> avec une exception <xref:System.ComponentModel.Win32Exception?displayProperty=name> interne est levé par la première opération d’E/S de lecture/écriture. Le code <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> de <xref:System.ComponentModel.Win32Exception?displayProperty=name> peut être mappé à l’alerte TLS provenant du tiers distant à l’aide de cette [documentation Schannel](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx). Pour plus d’informations, consultez la [section 7.2.2 de la RFC 2246 relative aux alertes d’erreur](https://tools.ietf.org/html/rfc2246#section-7.2.2). Dans .NET 4.6.2 et les versions antérieures le comportement est l’expiration du canal de transport (généralement une connexion TCP) pendant une opération de lecture ou d’écriture si l’autre partie n’est pas parvenue à négocier la connexion et l’a rejetée immédiatement après.|
|Suggestion|Les applications qui appellent des API d’E/S réseau comme <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)>/<xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> doivent gérer <xref:System.IO.IOException> ou <xref:System.TimeoutException?displayProperty=name>. La fonctionnalité des alertes TLS est activée par défaut à compter de .NET 4.7. Afin de préserver la compatibilité, cette fonctionnalité est désactivée pour les applications ciblant .NET 4.0 à .NET 4.6.2 qui s’exécutent sur un système .NET 4.7 ou ultérieur. L’API de configuration suivante est disponible pour activer ou désactiver la fonctionnalité pour les applications .NET 4.6 et ultérieures s’exécutant sur .NET 4.7 ou un framework ultérieur.<ul><li>Par programmation :</li></ul>Doit être la première action qu’effectue l’application car ServicePointManager ne s’initialisera qu’une seule fois :<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig :</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Clé de Registre (globale de l’ordinateur) :</li></ul>Définissez le paramètre Value sur « False » pour activer la fonctionnalité dans .NET 4.6 à 4.6.2.<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|Portée|Microsoft Edge|
|Version|4.7|
|Type|Reciblage|
|API affectées|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

