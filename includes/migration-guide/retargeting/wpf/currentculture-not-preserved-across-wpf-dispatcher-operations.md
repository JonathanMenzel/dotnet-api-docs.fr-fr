### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a>CurrentCulture n’est pas conservé entre les opérations de répartiteur WPF

|   |   |
|---|---|
|Détails|À compter de .NET Framework 4.6, modifications apportées à <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> ou <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> au sein d’un <xref:System.Windows.Threading.Dispatcher?displayProperty=name> seront perdues à la fin de cette opération de répartiteur. De même, les modifications à <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> ou <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> apportées en dehors d’un répartiteur de l’opération ne seront pas reportée lorsque que l’opération s’exécute. Concrètement, cela signifie que <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> et <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> modifications peuvent circule pas entre les rappels de WPF UI et tout autre code dans une application WPF. Cela est dû à une modification de <xref:System.Threading.ExecutionContext?displayProperty=name> qui provoque <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> et <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> doit être stockée au début du contexte d’exécution avec les applications ciblant le .NET Framework 4.6. Les opérations de répartiteur WPF stockent le contexte d’exécution utilisé pour commencer l’opération et restaurer le contexte précédent lorsque l’opération est terminée. Étant donné que <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> et <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> font désormais partie de ce contexte, les modifications qui leur sont apportées dans une opération de répartiteur ne sont pas conservées en dehors de cette opération.|
|Suggestion|Les applications affectées par cette modification peuvent contourner en stockant les <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> ou <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> dans un champ et en vérifiant dans toutes les instances d’opération répartiteur (y compris les gestionnaires de rappel d’événement UI) qui le bon <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> et <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> sont définies. Sinon, étant donné que le ExecutionContext changent sous-jacent cette modification WPF affecte uniquement les applications ciblant le .NET Framework 4.6 ou version ultérieure, cet arrêt peut être évité en ciblant la 4.5.2.Apps de .NET Framework qui ciblent .NET Framework 4.6 ou version ultérieure peut également fonctionner contourner cela en définissant la compatibilité suivante du commutateur :<pre><code>AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>Ce problème a été résolu par WPF dans .NET Framework 4.6.2. Il a également été résolu dans .NET Frameworks 4.6, 4.6.1 via [Ko 3139549](https://support.microsoft.com/kb/3139549). Applications qui ciblent le .NET 4.6 ou version ultérieure obtenez automatiquement le comportement de droite dans les applications WPF - <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) sont conservées entre les opérations de répartiteur.|
|Portée|Mineur|
|Version|4.6|
|Type|Reciblage|

