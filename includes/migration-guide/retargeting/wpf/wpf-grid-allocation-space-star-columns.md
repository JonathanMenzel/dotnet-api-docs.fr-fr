### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Allocation d’espace aux colonnes de l’étoile grille de WPF

|   |   |
|---|---|
|Détails|À partir de la 4.7 Framework .NET, WPF remplace l’algorithme qui <xref:System.Windows.Controls.Grid> utilise pour allouer de l’espace à *-colonnes. Cela modifie la largeur réelle assignée à *-colonnes dans un nombre de cas :<ul><li>Lorsqu’un ou plusieurs *-colonnes ont également une largeur minimale ou maximale qui remplace l’allocation proportionnelle pour cette colonne. (La largeur minimale peut dériver à partir d’une déclaration MinWidth explicite ou un minimum obtenu à partir du contenu de la colonne. La largeur maximale ne peut être définie explicitement, à partir d’une déclaration MaxWidth.)</li><li>Lorsqu’un ou plusieurs *-colonnes déclarent un pourcentage extrêmement élevé *-poids supérieur à 10 ^ 298.</li><li>Lorsque le *-poids sont suffisamment différents de rencontrer une instabilité à virgule flottante (dépassement de capacité, dépassement de capacité négatif, une perte de précision).</li><li>Lorsque l’arrondi de disposition est activé, et que la résolution d’affichage efficace en PPP est suffisamment élevée.</li></ul>Dans les deux premiers cas, la largeur des produits par le nouvel algorithme peuvent être considérablement différentes de ceux générés par l’ancien algorithme ; dans le dernier cas, la différence sera au plus un ou deux pixels. Le nouvel algorithme résout plusieurs bogues présents dans l’ancien algorithme :<ol><li>L’allocation totale à des colonnes peut dépasser la largeur de la grille. Cela peut se produire lors de l’allocation d’espace pour une colonne dont la part proportionnelle est inférieure à sa taille minimale. L’algorithme alloue la taille minimale, ce qui réduit l’espace disponible pour les autres colonnes. S’il n’y aucun *-pour allouer des colonnes, l’allocation totale sera trop volumineux.</li><li>L’allocation totale peut être inférieure à la largeur de la grille. Il s’agit de la double problème à #1, lors de l’allocation à une colonne dont la part proportionnelle est supérieure à sa taille maximale, sans aucune *-colonnes pour occuper la marge.</li><li>Deux *-colonnes peuvent recevoir des allocations non proportionnelles à leur *-poids. Il s’agit d’une version atténuée de #1/2, survenant lors de l’allocation aux colonnes * A, B et C (dans cet ordre), où la part proportionnelle de B ne respecte pas la contrainte min (ou max). Comme ci-dessus, cela modifie l’espace disponible pour la colonne C, qui obtient une allocation proportionnelle inférieure (ou supérieure) à A,</li><li>Colonnes avec des poids de très grande taille (&gt; 10 ^ 298) sont traitées comme si elles avaient poids 10 ^ 298. Les différences proportionnelles entre elles (et entre les colonnes avec des poids légèrement inférieurs) ne sont pas respectées.</li><li>Colonnes avec des poids d’inifinte ne sont pas traitées correctement. [Il est en fait impossible de définir un poids infini, mais il s’agit d’une restriction artificielle. Le code d’allocation essayait de le gérer, sans succès.]</li><li>Plusieurs problèmes mineurs en évitant le dépassement de capacité positif ou négatif, la perte de précision et autres problèmes liées aux nombres à virgule flottante.</li><li>Les ajustements d’arrondi de disposition sont incorrects à un niveau de PPP suffisamment élevé.</li></ol>Le nouvel algorithme produit des résultats qui répondent aux critères suivant : A. La largeur réelle assignée à un *-colonne n’est jamais inférieure à sa largeur minimale ni supérieure à sa largeur maximale. B. Chaque <em>-affecté à la colonne qui n’est pas sa valeur minimale ou la largeur maximale est affectée à une largeur proportionnelle à son <em>-poids. Pour être précis, si deux colonnes sont déclarées avec largeur x</em> et y</em> respectivement, et si aucune colonne reçoit sa largeur minimal ou maximal, les largeurs réel v w assignés aux colonnes dans la même proportion : v / w == x / y.C. La largeur totale allouée à &quot;proportionnel&quot; *-colonnes est égal à l’espace disponible après avoir alloué pour les colonnes de contraintes (fixe, auto, et *-les colonnes qui sont affectés à leur largeur min ou max). Cela peut être égal à zéro, par exemple si la somme des largeurs minimales dépasse la largeur d’availbable de la grille. D. Toutes ces instructions doivent être interprétés par rapport à la &quot;idéale&quot; mise en page. Lors de l’arrondi de disposition, la largeur réelle peut différer de la largeur idéale autant qu’un pixel. L’ancien algorithme honorées (A), mais n’a pas pu honorer les autres critères dans les cas présentées ci-dessus. Tout ce dont les informations sur les colonnes et les largeurs dans cet article s’applique également aux lignes et de hauteur.|
|Suggestion|Par défaut, les applications que ciblent des versions du .NET Framework en commençant par le 4.7 Framework .NET seront afficher le nouvel algorithme, pendant que la cible du .NET Framework 4.6.2 ou des versions antérieures seront afficher l’ancien algorithme des applications. Pour remplacer la valeur par défaut, utilisez le paramètre de configuration suivantes :<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>La valeur 'true' Sélectionne l’algorithme ancien, 'false' Sélectionne le nouvel algorithme.|
|Portée|Mineur|
|Version|4.7|
|Type|Reciblage|

