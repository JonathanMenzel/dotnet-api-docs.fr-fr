### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="f139e-101">CspParameters.ParentWindowHandle attend maintenant la valeur HWND</span><span class="sxs-lookup"><span data-stu-id="f139e-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="f139e-102">Détails</span><span class="sxs-lookup"><span data-stu-id="f139e-102">Details</span></span>|<span data-ttu-id="f139e-103">Le <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valeur, introduite dans .NET Framework 2.0, permet à une application enregistrer une valeur de handle de fenêtre parente, telles que l’interface utilisateur requis pour accéder à la clé (par exemple un code confidentiel inviter ou boîte de dialogue de consentement) s’ouvre comme un enfant modal à la fenêtre spécifiée. Les applications qui ciblent le 4.7 Framework .NET, une application Windows Forms peut définir le <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> propriété avec le code comme suit :</span><span class="sxs-lookup"><span data-stu-id="f139e-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="f139e-104">Dans les versions précédentes du .NET Framework, la valeur était censée être une <xref:System.IntPtr?displayProperty=name> représentant un emplacement mémoire où les [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valeur résidé.</span><span class="sxs-lookup"><span data-stu-id="f139e-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="f139e-105">Définition de la propriété au formulaire. Handle sur Windows 7 et versions antérieures n’avaient aucun effet, mais sur Windows 8 et versions ultérieures, il en résulte un &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: le paramètre est incorrect.&quot;</span><span class="sxs-lookup"><span data-stu-id="f139e-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="f139e-106">Suggestion</span><span class="sxs-lookup"><span data-stu-id="f139e-106">Suggestion</span></span>|<span data-ttu-id="f139e-107">Les applications ciblant .NET 4.7 ou une version ultérieure désireux d’enregistrer une relation de la fenêtre parente sont encouragées à utiliser le formulaire simplifié :</span><span class="sxs-lookup"><span data-stu-id="f139e-107">Applications targeting .NET 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="f139e-108">Les utilisateurs qui avaient identifié que la valeur correcte pour passer a l’adresse d’un emplacement de mémoire qui attribuée la valeur <code>form.Handle</code> peuvent la refuser la modification de comportement en définissant le commutateur AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> à <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="f139e-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="f139e-109">En définissant par programme compat bascule sur le AppContext, comme expliqué [ici](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="f139e-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="f139e-110">En ajoutant la ligne suivante à la section <code>&lt;runtime&gt;</code> du fichier app.config :</span><span class="sxs-lookup"><span data-stu-id="f139e-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="f139e-111">À l’inverse, les utilisateurs qui souhaitent s’abonner au nouveau comportement sur le runtime .NET Framework 4.7 lorsque l’application est chargée sous les versions antérieures du .NET Framework peut définir le AppContext basculent vers <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="f139e-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="f139e-112">Portée</span><span class="sxs-lookup"><span data-stu-id="f139e-112">Scope</span></span>|<span data-ttu-id="f139e-113">Mineur</span><span class="sxs-lookup"><span data-stu-id="f139e-113">Minor</span></span>|
|<span data-ttu-id="f139e-114">Version</span><span class="sxs-lookup"><span data-stu-id="f139e-114">Version</span></span>|<span data-ttu-id="f139e-115">4.7</span><span class="sxs-lookup"><span data-stu-id="f139e-115">4.7</span></span>|
|<span data-ttu-id="f139e-116">Type</span><span class="sxs-lookup"><span data-stu-id="f139e-116">Type</span></span>|<span data-ttu-id="f139e-117">Reciblage</span><span class="sxs-lookup"><span data-stu-id="f139e-117">Retargeting</span></span>|
|<span data-ttu-id="f139e-118">API affectées</span><span class="sxs-lookup"><span data-stu-id="f139e-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

