### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a>CspParameters.ParentWindowHandle attend maintenant la valeur HWND

|   |   |
|---|---|
|Détails|Le <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valeur, introduite dans .NET Framework 2.0, permet à une application enregistrer une valeur de handle de fenêtre parente, telles que l’interface utilisateur requis pour accéder à la clé (par exemple un code confidentiel inviter ou boîte de dialogue de consentement) s’ouvre comme un enfant modal à la fenêtre spécifiée. Les applications qui ciblent le 4.7 Framework .NET, une application Windows Forms peut définir le <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> propriété avec le code comme suit :<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>Dans les versions précédentes du .NET Framework, la valeur était censée être une <xref:System.IntPtr?displayProperty=name> représentant un emplacement mémoire où les [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valeur résidé. Définition de la propriété au formulaire. Handle sur Windows 7 et versions antérieures n’avaient aucun effet, mais sur Windows 8 et versions ultérieures, il en résulte un &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: le paramètre est incorrect.&quot;|
|Suggestion|Les applications ciblant .NET 4.7 ou une version ultérieure désireux d’enregistrer une relation de la fenêtre parente sont encouragées à utiliser le formulaire simplifié :<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>Les utilisateurs qui avaient identifié que la valeur correcte pour passer a l’adresse d’un emplacement de mémoire qui attribuée la valeur <code>form.Handle</code> peuvent la refuser la modification de comportement en définissant le commutateur AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> à <code>true</code>.<ol><li>En définissant par programme compat bascule sur le AppContext, comme expliqué [ici](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</li><li>En ajoutant la ligne suivante à la section <code>&lt;runtime&gt;</code> du fichier app.config :</li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>À l’inverse, les utilisateurs qui souhaitent s’abonner au nouveau comportement sur le runtime .NET Framework 4.7 lorsque l’application est chargée sous les versions antérieures du .NET Framework peut définir le AppContext basculent vers <code>false</code>.|
|Portée|Mineur|
|Version|4.7|
|Type|Reciblage|
|API affectées|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

