### <a name="horizontal-scrolling-and-virtualization"></a><span data-ttu-id="5607b-101">Défilement horizontal et virtualisation</span><span class="sxs-lookup"><span data-stu-id="5607b-101">Horizontal scrolling and virtualization</span></span>

|   |   |
|---|---|
|<span data-ttu-id="5607b-102">Détails</span><span class="sxs-lookup"><span data-stu-id="5607b-102">Details</span></span>|<span data-ttu-id="5607b-103">Cette modification s’applique à un <xref:System.Windows.Controls.ItemsControl?displayProperty=name> qui fait sa propre virtualisation dans le sens orthogonal vers la direction de défilement principale (l’exemple classique est <xref:System.Windows.Controls.DataGrid?displayProperty=name> avec EnableColumnVirtualization=&quot;True&quot;).</span><span class="sxs-lookup"><span data-stu-id="5607b-103">This change applies to an <xref:System.Windows.Controls.ItemsControl?displayProperty=name> that does its own virtualization in the direction orthogonal to the main scrolling direction (the chief example is <xref:System.Windows.Controls.DataGrid?displayProperty=name> with EnableColumnVirtualization=&quot;True&quot;).</span></span>  <span data-ttu-id="5607b-104">Le résultat de certaines opérations de défilement horizontal a été changé pour produire des résultats qui sont plus intuitifs et plus proches des résultats des opérations verticales comparables. Les opérations sont &quot;Défilement ici&quot; et &quot;Bord droit&quot;, pour utiliser les noms du menu obtenu en cliquant avec le bouton droit sur une barre de défilement horizontale.</span><span class="sxs-lookup"><span data-stu-id="5607b-104">The outcome of certain horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.The operations include &quot;Scroll Here&quot; and &quot;Right Edge&quot;, to use the names from the menu obtained by right-clicking a horizontal scrollbar.</span></span>  <span data-ttu-id="5607b-105">Les deux calculent un décalage candidat et appellent <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>. Après le défilement jusqu’au nouveau décalage, la notion représentée par &quot;ici&quot; ou &quot;bord droit&quot; peut avoir changé, car le contenu nouvellement dévirtualisé a changé la valeur de <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>. Avant .NET 4.6.2, l’opération de défilement utilise simplement le décalage candidat, même s’il peut ne plus être &quot;ici&quot; ou au &quot;bord droit&quot;.</span><span class="sxs-lookup"><span data-stu-id="5607b-105">Both of these compute a candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.After scrolling to the new offset, the notion of &quot;here&quot; or &quot;right edge&quot; may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>.Prior to .Net 4.6.2, the scroll operation simply uses the candidate offset, even though it may not be &quot;here&quot; or at the &quot;right edge&quot; any more.</span></span>  <span data-ttu-id="5607b-106">Ceci entraîne des effets comme un « rebondissement » du curseur de défilement, comme illustré dans l’exemple.</span><span class="sxs-lookup"><span data-stu-id="5607b-106">This results in effects like &quot;bouncing&quot; the scroll thumb, best illustrated by example.</span></span> <span data-ttu-id="5607b-107">Supposons qu’un <xref:System.Windows.Controls.DataGrid?displayProperty=name> a ExtentWidth=1000 et Width=200.</span><span class="sxs-lookup"><span data-stu-id="5607b-107">Suppose a <xref:System.Windows.Controls.DataGrid?displayProperty=name> has ExtentWidth=1000 and Width=200.</span></span>  <span data-ttu-id="5607b-108">Un défilement vers « Bord droit » utilise un décalage candidat de 1000-200 = 800.</span><span class="sxs-lookup"><span data-stu-id="5607b-108">A scroll to &quot;Right Edge&quot; uses candidate offset 1000 - 200 = 800.</span></span>  <span data-ttu-id="5607b-109">Lors du défilement jusqu’à ce décalage, les nouvelles colonnes sont dévirtualisées. Supposons qu’elles sont très larges, de sorte que <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> passe à 2000.</span><span class="sxs-lookup"><span data-stu-id="5607b-109">While scrolling to that offset, new columns are de- virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> changes to 2000.</span></span>  <span data-ttu-id="5607b-110">Le défilement se termine avec HorizontalOffset=800, et le curseur &quot;rebondit&quot; et revient à proximité du milieu de la barre de défilement - précisément à 800/2000 = 40 %. La modification consiste à recalculer un nouveau décalage candidat quand cette situation se produit et à réessayer.</span><span class="sxs-lookup"><span data-stu-id="5607b-110">The scroll ends with HorizontalOffset=800, and the thumb &quot;bounces&quot; back to near the middle of the scrollbar - precisely at 800/2000 = 40%.The change is to recompute a new candidate offset when this situation occurs, and try again.</span></span> <span data-ttu-id="5607b-111">(Ceci est la façon dont le défilement vertical fonctionne déjà.) Le changement produit une expérience plus prévisible et intuitive pour l’utilisateur final, mais il peut aussi affecter les applications qui dépendent de la valeur exacte de <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> après un défilement horizontal, qu’il s’agisse d’un appel explicite à <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)> ou d’un appel effectué par l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="5607b-111">(This is how vertical scrolling works already.)The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.</span></span>|
|<span data-ttu-id="5607b-112">Suggestion</span><span class="sxs-lookup"><span data-stu-id="5607b-112">Suggestion</span></span>|<span data-ttu-id="5607b-113">Une application qui utilise une valeur prédite pour <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> doit être changée afin de récupérer la valeur réelle (et la valeur de <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) après un défilement horizontal susceptible de modifier <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> en raison de la dévirtualisation.</span><span class="sxs-lookup"><span data-stu-id="5607b-113">An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> should be changed to fetch the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> due to de-virtualization.</span></span>|
|<span data-ttu-id="5607b-114">Portée</span><span class="sxs-lookup"><span data-stu-id="5607b-114">Scope</span></span>|<span data-ttu-id="5607b-115">Mineur</span><span class="sxs-lookup"><span data-stu-id="5607b-115">Minor</span></span>|
|<span data-ttu-id="5607b-116">Version</span><span class="sxs-lookup"><span data-stu-id="5607b-116">Version</span></span>|<span data-ttu-id="5607b-117">4.6.2</span><span class="sxs-lookup"><span data-stu-id="5607b-117">4.6.2</span></span>|
|<span data-ttu-id="5607b-118">Type</span><span class="sxs-lookup"><span data-stu-id="5607b-118">Type</span></span>|<span data-ttu-id="5607b-119">Runtime</span><span class="sxs-lookup"><span data-stu-id="5607b-119">Runtime</span></span>|
|<span data-ttu-id="5607b-120">API affectées</span><span class="sxs-lookup"><span data-stu-id="5607b-120">Affected APIs</span></span>|<ul><li><xref:System.Windows.Controls.Primitives.IScrollInfo?displayProperty=nameWithType></li></ul>|

