### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a>Période pour les bases de données SQL Azure de blocage de pool de connexions est supprimé.

|   |   |
|---|---|
|Détails|À compter de .NET Framework 4.6.2, pour la connexion de demandes d’ouverture aux bases de données SQL Azure connus (*. database.windows.net, *. database.chinacloudapi.cn, *. database.usgovcloudapi.net, *. database.cloudapi.de), le pool de connexions est de la période de blocage supprimé, et les erreurs d’ouverture de connexion ne sont pas mises en cache. Chaque nouvelle tentative de demande d’ouverture de connexion se produira presque immédiatement après les erreurs de connexion temporaires. Cette modification permet de la tentative de connexion ouvrir une nouvelle tentative immédiatement pour les bases de données SQL Azure, ce qui améliore les performances des applications cloud-activé. Pour toutes les autres tentatives de connexion, la période de blocage de pool de connexion continue d’être appliquées. Dans .NET Framework 4.6.1 et versions antérieures, quand une application rencontre un échec de connexion temporaire lors de la connexion à une base de données, la tentative de connexion ne peut pas être recommencée rapidement, car le pool de connexions met en cache de l’erreur et lève de nouveau pendant 5 secondes pour 1 minute. Pour plus d’informations, consultez [le regroupement de connexion SQL Server (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md). Ce comportement pose problème pour les connexions aux bases de données SQL Azure, qui échouent souvent avec des erreurs temporaires, généralement rétablies au bout de quelques secondes. La fonctionnalité de blocage de pool de connexion signifie que l’application ne peut pas se connecter à la base de données pendant une période étendue, même si la base de données est disponible et que l’application a besoin d’afficher après quelques secondes.|
|Suggestion|Si ce comportement n’est pas souhaitable, la période de blocage de pool de connexion peut être configurée en définissant le <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> propriété introduite dans le .NET Framework 4.6.2. La valeur de la propriété est un membre de l’énumération <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> qui peut prendre l’une des trois valeurs suivantes :<ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul>Vous pouvez restaurer le comportement précédent en affectant la valeur <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock> à la propriété <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name>.|
|Portée|Mineur|
|Version|4.6.2|
|Type|Runtime|
|API affectées|<ul><li><xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|

