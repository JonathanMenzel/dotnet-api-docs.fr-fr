### <a name="change-in-behavior-for-taskwaitall-methods-with-time-out-arguments"></a><span data-ttu-id="2aa5c-101">Changement de comportement des méthodes Task.WaitAll avec des arguments de délai d’attente</span><span class="sxs-lookup"><span data-stu-id="2aa5c-101">Change in behavior for Task.WaitAll methods with time-out arguments</span></span>

|   |   |
|---|---|
|<span data-ttu-id="2aa5c-102">Détails</span><span class="sxs-lookup"><span data-stu-id="2aa5c-102">Details</span></span>|<span data-ttu-id="2aa5c-103">Le comportement de Task.WaitAll est devenu plus cohérent dans .NET 4.5. Dans .NET Framework 4, le comportement de ces méthodes n’était pas cohérent.</span><span class="sxs-lookup"><span data-stu-id="2aa5c-103">Task.WaitAll behavior was made more consistent in .NET 4.5.In the .NET Framework 4, these methods behaved inconsistently.</span></span> <span data-ttu-id="2aa5c-104">Lorsque le délai d'attente expirait, si une ou plusieurs tâches étaient terminées ou annulées avant l'appel de la méthode, la méthode levait une exception <xref:System.AggregateException?displayProperty=name>.</span><span class="sxs-lookup"><span data-stu-id="2aa5c-104">When the time-out expired, if one or more tasks were completed or canceled before the method call, the method threw an <xref:System.AggregateException?displayProperty=name> exception.</span></span> <span data-ttu-id="2aa5c-105">Lorsque le délai d’attente expirait, si aucune tâche n’était terminée ou annulée avant l’appel de la méthode alors qu’une ou plusieurs tâches adoptaient ces états après l’appel de la méthode, la méthode retournait la valeur false.</span><span class="sxs-lookup"><span data-stu-id="2aa5c-105">When the time-out expired, if no tasks were completed or canceled before the method call, but one or more tasks entered these states after the method call, the method returned false.</span></span><br/><br/><span data-ttu-id="2aa5c-106">Dans .NET Framework 4.5, ces surcharges de méthode retournent désormais la valeur false si des tâches sont toujours en cours d’exécution quand l’intervalle de délai d’attente expire, et elles ne lèvent une exception <xref:System.AggregateException?displayProperty=name> que si une tâche d’entrée a été annulée (que cette annulation soit intervenue avant ou après l’appel de méthode) et qu’aucune autre tâche n’est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="2aa5c-106">In the .NET Framework 4.5, these method overloads now return false if any tasks are still running when the time-out interval expired, and they throw an <xref:System.AggregateException?displayProperty=name> exception only if an input task was cancelled (regardless of whether it was before or after the method call) and no other tasks are still running.</span></span>|
|<span data-ttu-id="2aa5c-107">Suggestion</span><span class="sxs-lookup"><span data-stu-id="2aa5c-107">Suggestion</span></span>|<span data-ttu-id="2aa5c-108">Si une exception <xref:System.AggregateException?displayProperty=name> a été interceptée dans le but de détecter une tâche ayant été annulée avant l’appel de WaitAll, ce code doit procéder à la même détection via la propriété IsCanceled (par exemple, .Any(t =&gt; t.IsCanceled)), puisque .NET 4.6 ne lève une exception que si toutes les tâches attendues sont terminées avant le délai d’attente.</span><span class="sxs-lookup"><span data-stu-id="2aa5c-108">If an <xref:System.AggregateException?displayProperty=name> was being caught as a means of detecting a task that was cancelled prior to the WaitAll call being invoked, that code should instead do the same detection via the IsCanceled property (for example: .Any(t =&gt; t.IsCanceled)) since .NET 4.6 will only throw in that case if all awaited tasks are completed prior to the timeout.</span></span>|
|<span data-ttu-id="2aa5c-109">Portée</span><span class="sxs-lookup"><span data-stu-id="2aa5c-109">Scope</span></span>|<span data-ttu-id="2aa5c-110">Mineur</span><span class="sxs-lookup"><span data-stu-id="2aa5c-110">Minor</span></span>|
|<span data-ttu-id="2aa5c-111">Version</span><span class="sxs-lookup"><span data-stu-id="2aa5c-111">Version</span></span>|<span data-ttu-id="2aa5c-112">4.5</span><span class="sxs-lookup"><span data-stu-id="2aa5c-112">4.5</span></span>|
|<span data-ttu-id="2aa5c-113">Type</span><span class="sxs-lookup"><span data-stu-id="2aa5c-113">Type</span></span>|<span data-ttu-id="2aa5c-114">Runtime</span><span class="sxs-lookup"><span data-stu-id="2aa5c-114">Runtime</span></span>|
|<span data-ttu-id="2aa5c-115">API affectées</span><span class="sxs-lookup"><span data-stu-id="2aa5c-115">Affected APIs</span></span>|<ul><li><xref:System.Threading.Tasks.Task.WaitAll(System.Threading.Tasks.Task[],System.Int32)?displayProperty=nameWithType></li><li><xref:System.Threading.Tasks.Task.WaitAll(System.Threading.Tasks.Task[],System.Int32,System.Threading.CancellationToken)?displayProperty=nameWithType></li><li><xref:System.Threading.Tasks.Task.WaitAll(System.Threading.Tasks.Task[],System.TimeSpan)?displayProperty=nameWithType></li></ul>|

